meta {
  name: 01_POST Authentication
  type: http
  seq: 1
}

post {
  url: {{baseUrl}}/tokens
  body: json
  auth: inherit
}

params:query {
  : 
}

body:json {
  {
    "email":"{{AG_email}}",
    "password":"{{AG_password}}"
  }
}

script:post-response {
  const response = res.getBody();
  bru.setEnvVar("airportgap_token", response.token)
}

tests {
  console.log("Getting authentication token");
  bru.setNextRequest("02_[HP] POST /favorites")
}

settings {
  encodeUrl: true
  timeout: 0
}
